const { OpenAI } = require('openai');
const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

module.exports.generateBrandNarrative = async () => {
  const prompt = `
–¢—ã ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä –±—Ä–µ–Ω–¥–∞ AutoSniper. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞, –µ–≥–æ –º–∏—Å—Å–∏–∏, –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã. –£–ø–æ—Ä –Ω–∞ –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ—Å—Ç—å, —Å–∫–æ—Ä–æ—Å—Ç—å, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ—Å—Ç—å, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –≤–∏–∑—É–∞–ª—å–Ω—É—é —á–∏—Å—Ç–æ—Ç—É –∏ AI-–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç.

–í—ã–≤–µ–¥–∏:
1. üî• –ú–∏—Å—Å–∏—è –±—Ä–µ–Ω–¥–∞ (1-2 —Å—Ç—Ä–æ–∫–∏)
2. üéØ –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∏–ª—å (3 bullets)
3. üí¨ –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞ (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
4. üñº –í–∏–∑—É–∞–ª—å–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç, –∞–Ω–∏–º–∞—Ü–∏–∏)
`;

  try {
    const res = await openai.chat.completions.create({
      model: 'gpt-4',
      messages: [{ role: 'user', content: prompt }],
      temperature: 0.8
    });

    return res.choices[0].message.content;
  } catch (err) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±—Ä–µ–Ω–¥–∞:', err.message);
    return '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è –±—Ä–µ–Ω–¥–∞';
  }
};